// RTL (Right-to-Left) Support Styles
// This file contains all the necessary overrides for RTL languages like Arabic and Hebrew

// Prevent horizontal scroll caused by elements with negative margins in RTL
// This is critical for mobile RTL layouts
html[dir="rtl"],
html[dir="rtl"] body {
  overflow-x: hidden;
}

[dir="rtl"] {
  // Text alignment adjustments
  text-align: right;

  // Container and layout adjustments
  .container {
    text-align: right;
  }

  // Header adjustments
  .header {
    .navbar-brand {
      margin-right: 0;
      margin-left: auto;
    }
    
    .navbar-nav {
      padding-right: 0;
      padding-left: 0;
    }
    
    .navbar .nav-item .nav-link::after {
      right: 0;
      left: auto;
    }
  }

  // Navbar adjustments
  .navbar-collapse {
    .navbar-nav {
      margin-right: auto;
      margin-left: 0 !important;
    }
  }

  // Footer adjustments
  .footer_links {
    .nav {
      justify-content: flex-start;
    }
  }

  // Skip to content link
  .skip-to-content-link:focus {
    // Use logical properties so centering works consistently in RTL
    left: auto;
    right: auto;
    inset-inline-start: 50%;
    transform: translateX(-50%);
  }

  // Showcase section
  .showcase-section {
    .platform-links.shortcode {
      margin-left: 0;
      
      // Apply negative margin only on larger screens to prevent horizontal scroll on mobile
      @media (min-width: 992px) {
        margin-right: -40px;
      }
    }
    
    // Mirror showcase image for RTL - the image appears on the left side in RTL
    // which looks better with the content flow
    .profile-image {
      img {
        transform: scaleX(-1);
      }
    }
  }
  
  // Fix elements with negative margins that cause horizontal overflow on mobile RTL
  // About profile picture - reset negative margins on mobile
  .about__profile-picture {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
    max-width: 100%;
    flex: 0 0 100%;
  }
  
  // Platform links - reset negative margins
  .platform-links {
    margin-right: 0;
    margin-left: 0;
  }
  
  // Clients section - reset negative margins
  .clients {
    margin-left: 0;
    margin-right: 0;
  }
  
  // RTL image mirroring - images with class "rtl-mirror" will be mirrored in RTL mode
  // This is useful for directional images like arrows, hands pointing, etc.
  img.rtl-mirror,
  .rtl-mirror img {
    transform: scaleX(-1);
  }
  
  // Images that should NOT be mirrored in RTL (override for specific cases)
  img.rtl-no-mirror,
  .rtl-no-mirror img {
    transform: none !important;
  }

  // Experience and education timeline
  .education,
  .experience-item {
    &::before {
      left: auto;
      right: 0;
    }
  }

  // Lists with custom markers
  .section li::before {
    left: auto;
    right: 0;
    margin-left: 0;
    margin-right: -1.5em;
  }

  // Buttons with icons
  .btn {
    i, [class^="icon-"] {
      margin-right: 0;
      margin-left: 0.5rem;
    }
  }

  // Dropdowns
  .dropdown-menu {
    text-align: right;
    
    &.dropdown-menu-end {
      right: auto;
      left: 0;
    }
  }

  // Form inputs
  input,
  textarea {
    text-align: right;
  }

  // Blog posts
  .posts-list {
    article {
      text-align: right;
    }
  }

  // Blog sidebar
  .blog-sidebar {
    .sidebar-section {
      text-align: right;
    }
  }

  // Breadcrumb
  #breadcrumb-bar {
    text-align: right;
    
    nav {
      // Keep inline-block, text-align on parent will align it to the right
      display: inline-block;
    }
  }
  
  .breadcrumbs {
    padding-right: 0;
    justify-content: flex-end; // Align breadcrumbs to the right in RTL
    
    .breadcrumb-item {
      &:not(:last-child)::after {
        margin-left: 0;
        margin-right: 0.5rem;
      }
    }
  }

  // Contact section
  .contact__info {
    text-align: right;
  }

  // Client work cards
  .client-works-container {
    text-align: right;
  }

  // Testimonials
  .testimonial {
    text-align: right;
    
    &__author {
      flex-direction: row-reverse;
    }
    
    &__author-info {
      text-align: right;
      margin-left: 0;
      margin-right: 1rem;
    }
  }

  // Language selector
  #footer-language-selector,
  #header-language-selector {
    .dropdown-menu {
      text-align: right;
    }
  }

  // Search
  .search-results {
    text-align: right;
  }

  // Skills section
  .skills-section {
    text-align: right;
    
    .progress {
      direction: rtl;
    }
  }

  // Social sharing
  .social-sharing {
    direction: rtl;
  }

  // Table of contents
  .toc {
    text-align: right;
    
    ul {
      padding-right: 1rem;
      padding-left: 0;
    }
  }

  // Table of Contents (full component)
  .table-of-contents {
    border-left: none;
    border-right: 4px solid var(--bs-primary);
    
    #TableOfContents {
      ul {
        padding-left: 0;
        padding-right: 0;
        
        ul {
          padding-left: 0;
          padding-right: 1.5rem;
        }
      }
    }
  }

  // Code blocks
  .post-content,
  .post-summary {
    code {
      text-align: left; // Code should remain left-aligned even in RTL
      direction: ltr; // Code is typically LTR
    }
    
    pre {
      text-align: left;
      direction: ltr;
      
      code {
        direction: ltr;
      }
    }
  }

  // Blockquotes
  .post-content,
  .post-summary {
    blockquote {
      border-left: none;
      border-right: 4px solid var(--bs-primary);
      padding-left: 0;
      padding-right: 1.5rem;
      text-align: right;
    }
  }

  // Tables
  table {
    text-align: right;
    direction: rtl;
    
    th,
    td {
      text-align: right;
    }
  }

  // Search input enhancements
  #search-query {
    text-align: right;
    direction: rtl;
    padding-left: 0;
    padding-right: 1rem;
  }
  
  .input-group {
    direction: rtl;
    
    #search-query {
      border-top-right-radius: 0.375rem;
      border-bottom-right-radius: 0.375rem;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
    
    .input-group-text {
      border-top-left-radius: 0.375rem;
      border-bottom-left-radius: 0.375rem;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
  }

  // Responsive adjustments
  @media (min-width: 992px) {
    .ml-lg-auto,
    .mx-lg-auto {
      margin-left: 0 !important;
      margin-right: auto !important;
    }
  }

  // Print styles for RTL
  @media print {
    body {
      direction: rtl;
    }
  }
}

// Bootstrap RTL overrides
// Using html[dir="rtl"] for higher specificity to override Bootstrap utilities without !important
html[dir="rtl"] {
  // Use Bootstrap's RTL mixins when available
  
  // Margin utilities - using body selector for additional specificity
  body .ms-auto {
    margin-right: auto;
    margin-left: 0;
  }
  
  body .me-auto {
    margin-left: auto;
    margin-right: 0;
  }
  
  // Padding utilities
  .ps-0 {
    padding-right: 0 !important;
    padding-left: inherit !important;
  }
  
  .pe-0 {
    padding-left: 0 !important;
    padding-right: inherit !important;
  }
  
  // Text utilities
  .text-start {
    text-align: right !important;
  }
  
  .text-end {
    text-align: left !important;
  }
  
  // Float utilities
  .float-start {
    float: right !important;
  }
  
  .float-end {
    float: left !important;
  }
}
